/* =================================================================================================
   CRM 2.0 – BERICHT EINSATZ MODULE
   Datei: crm_bericht_einsatz.css
   Sprungmarken:
   - [BE-0100] Card Wrapper
   - [BE-0200] Kunde / Autocomplete
   - [BE-0300] Meta (Allgemein)
   - [BE-0400] Datensicherung
   - [BE-0500] Textareas
   - [BE-0600] Signatur
   - [BE-0700] Actions / Block-Layout (rechts Buttons)
   - [BE-0800] Einsatzzeiten (Desktop/Mobile)
   - [BE-0900] Tätigkeiten (Desktop/Mobile)
   - [BE-1000] Material (Desktop/Mobile)
   - [BE-1100] Abnahme
================================================================================================= */


/* =================================================================================================
   [BE-0100] CARD WRAPPER
================================================================================================= */

.be_card{
  margin-bottom:16px;
}

/* Flyouts dürfen nicht abgeschnitten werden */
.be_card .card__body{
  overflow:visible;
}


/* =================================================================================================
   [BE-0200] CUSTOMER (Chip + Input) + AUTOCOMPLETE
================================================================================================= */

.be_row{
  display:flex;
  gap:14px;
  align-items:flex-end;
  flex-wrap:wrap;
}

.be_row--tight + .be_row{
  margin-top:6px;
}

.be_col{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.be_col--grow{
  flex:1 1 100%;
  min-width:320px;
}

.be_customerline{
  display:flex;
  align-items:center;
  gap:10px;
}

#be_customer_chip{
  flex:0 0 auto;
}

#be_kunde_firma{
  flex:1 1 auto;
  min-width:220px;
}

.be_card .autocomplete{
  position:relative;
  z-index:1200; /* über Cards/Flyouts, unter CTI */
}

.be_card .crm-suggest{
  position:absolute;
  left:0;
  right:0;
  top:calc(100% + 6px);
  z-index:6000;
}


/* =================================================================================================
   [BE-0300] META (Allgemein) – responsive
================================================================================================= */

.be_meta--allg{
  display:grid;
  grid-template-columns: 220px 160px 160px 1fr;
  gap:14px;
  align-items:end;
}

@media (max-width: 980px){
  .be_meta--allg{
    grid-template-columns: 1fr 1fr;
  }
}

@media (max-width: 520px){
  .be_meta--allg{
    grid-template-columns: 1fr;
  }
}


/* =================================================================================================
   [BE-0400] DATENSICHERUNG – Choices
================================================================================================= */

.be_choices{
  display:block;
  margin-top:6px;
}

.be_chk{
  display:flex;
  align-items:flex-start;
  gap:10px;
  margin:6px 0;
  white-space:normal;
}

.be_chk input{
  margin-top:3px;
}


/* =================================================================================================
   [BE-0500] TEXTAREAS
================================================================================================= */

.be_textarea{
  min-height:110px;
  resize:vertical;
}


/* =================================================================================================
   [BE-0600] SIGNATURE CANVAS
================================================================================================= */

.be_sig{
  width:100%;
  height:auto;
  border-radius:12px;
  background:#fff;
  border:1px solid rgba(0,0,0,.15);
  touch-action:none;
  max-height:200px;
}


/* =================================================================================================
   [BE-0700] ACTIONS + BLOCK-LAYOUT (rechts Buttons)
================================================================================================= */

.be_actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  margin-top:10px;
}

.be_actions--sum{
  margin-top:8px;
}

.be_spacer{
  flex:1 1 auto;
}

/* Block: links Inhalt, rechts Action-Spalte (+) */
.be_block{
  display:grid;
  grid-template-columns: 1fr 44px;
  gap:10px;
  align-items:start;
}

.be_block__side{
  display:flex;
  flex-direction:column;
  gap:10px;
  justify-content:flex-start;
  align-items:flex-end;
  padding-top: 28px; /* Desktop: optisch auf Höhe der Einsatz-Inputs */
}

@media (max-width: 720px){
  .be_block__side{
    padding-top: 0; /* Mobile: kein Label-Offset */
  }
}

/* Stundenanzeige neben Minuten */
.be_sum_hours{
  margin-left:6px;
  color:#777;
  white-space:nowrap;
}


/* =================================================================================================
   [BE-0800] EINSATZZEITEN (Desktop/Mobile)
================================================================================================= */

.be_e_head,
.be_e_row{
  display:grid;
  grid-template-columns: 160px 96px 96px 84px 1fr 38px; /* Datum | Beginn | Ende | Min | Mitarbeiter | X */
  gap:10px;
  align-items:center;
}

.be_e_head{
  font-size:12px;
  color:#666;
  margin: 6px 0 8px;
}

.be_e_row .be_e_cell{
  min-width:0;
}

.be_e_row .input{
  width:100%;
}

/* Einsatzzeit (min) schmal + rechtsbündig */
.be_e_durcell .be_e_dur{
  text-align:right;
  padding-right:10px;
}

/* X mittig */
.be_e_row .be_e_delcell{
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Mobile: 2 Zeilen, X rechts über beide Zeilen */
@media (max-width: 720px){

  .be_e_head{
    display:none;
  }

  .be_e_row{
    grid-template-columns: 1.35fr .95fr .95fr .85fr 38px; /* date | start | end | min | x */
    grid-auto-rows:auto;
    align-items:center;
  }

  .be_e_row .be_e_date{        grid-column:1/2; grid-row:1; }
  .be_e_row .be_e_startcell{   grid-column:2/3; grid-row:1; }
  .be_e_row .be_e_endcell{     grid-column:3/4; grid-row:1; }
  .be_e_row .be_e_durcell{     grid-column:4/5; grid-row:1; }
  .be_e_row .be_e_mitcell{     grid-column:1/5; grid-row:2; }

  .be_e_row .be_e_delcell{
    grid-column:5/6;
    grid-row:1/3;
    align-self:stretch;
    display:flex;
    align-items:center;
    justify-content:center;
  }
}


/* =================================================================================================
   [BE-0900] TÄTIGKEITEN (Desktop/Mobile)
================================================================================================= */

.be_t_row{
  display:grid;
  grid-template-columns: 1fr 38px;
  gap:10px;
  align-items:center;
}

.be_t_row .input{
  width:100%;
}

.be_t_row .be_t_del{
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Mobile: bleibt 2-spaltig (Input + X) */
@media (max-width: 720px){
  .be_t_row{
    grid-template-columns: 1fr 38px;
    align-items:start;
  }

  .be_t_row .be_t_del{
    align-self:stretch;
  }
}


/* =================================================================================================
   [BE-1000] MATERIAL (Desktop/Mobile)
================================================================================================= */

.be_m_row{
  display:grid;
  grid-template-columns: 220px 1fr 90px 110px 38px;
  gap:10px;
  align-items:center;
}

.be_m_row .input{
  width:100%;
}

.be_m_row .be_m_cell{
  min-width:0;
}

/* Suggest sauber */
.be_m_row .autocomplete{
  position:relative;
}

.be_m_row .m_suggest{
  left:0;
  right:0;
}

/* X mittig */
.be_m_row .be_m_del{
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Mobile: kompakt als Grid-Areas, X rechts über alle Zeilen */
@media (max-width: 720px){

  .be_m_row{
    grid-template-columns: 1fr 90px 38px; /* main | small | x */
    grid-template-areas:
      "art art del"
      "txt txt del"
      "qty unit del";
    align-items:center;
  }

  .be_m_row .be_m_art{  grid-area: art; }
  .be_m_row .be_m_txt{  grid-area: txt; }
  .be_m_row .be_m_qty{  grid-area: qty; }
  .be_m_row .be_m_unit{ grid-area: unit; }

  .be_m_row .be_m_del{
    grid-area: del;
    align-self:stretch;
    display:flex;
    align-items:center;
    justify-content:center;
  }
}


/* =================================================================================================
   [BE-1100] ABNAHME
================================================================================================= */

.be_abnahme{
  font-weight:700;
}



/* =================================================================================================
   [BE-MOBILE-ADD-ANCHORS] + Buttons unten platzieren (Einsatz / Tätigkeiten / Material)
   - Einsatz: + neben Gesamtzeile
   - Tätigkeiten: + rechts unter der Liste
   - Material: + rechts unter der Liste
================================================================================================= */

/* Einsatz: Grid (Inhalt + rechter Button) */
.be_e_wrap{
  display:grid;
  grid-template-columns: 1fr;
  gap:10px;
}

/* rechter Block oben ausblenden (wir zeigen + unten bei Summe) */
.be_e_right{ display:none; }

/* Summe + Add in EINER Zeile */
.be_actions--sum{
  display:flex;
  align-items:center;
  gap:10px;
}
.be_actions--sum .muted{ flex:1 1 auto; }

/* optional: gleiche Optik/Größe wie andere Icon Buttons */
#be_btn_add_einsatz{ flex:0 0 auto; }

/* Tätigkeiten/Material: Add-Button unter die Liste (rechts) */
.be_actions--tasks,
.be_actions--material{
  display:flex;
  justify-content:flex-end;
  margin-top:10px;
}

/* Mobile: in Portrait alles stimmig lassen */
@media (max-width: 720px){
  .be_actions--sum{ margin-top:8px; }
}
